{"ast":null,"code":"import{useEffect}from\"react\";const useRefreshHandler=_ref=>{let{showInitialPopup,setShowRefreshWarning}=_ref;useEffect(()=>{const clearDataOnRefresh=()=>{sessionStorage.clear();};window.addEventListener(\"beforeunload\",clearDataOnRefresh);return()=>{window.removeEventListener(\"beforeunload\",clearDataOnRefresh);};},[]);useEffect(()=>{const blockRefresh=e=>{if(!showInitialPopup){e.preventDefault();e.stopPropagation();e.returnValue=\"\";}};const blockKeyboardRefresh=e=>{if(!showInitialPopup){if(e.metaKey&&e.key===\"r\"||// Cmd + R (macOS)\ne.ctrlKey&&e.key===\"r\"||// Ctrl + R (Windows/Linux)\ne.key===\"F5\"// F5 (all platforms)\n){e.preventDefault();e.stopPropagation();}}};const blockContextMenu=e=>{if(!showInitialPopup){e.preventDefault();}};window.addEventListener(\"beforeunload\",blockRefresh);window.addEventListener(\"keydown\",blockKeyboardRefresh);window.addEventListener(\"contextmenu\",blockContextMenu);return()=>{window.removeEventListener(\"beforeunload\",blockRefresh);window.removeEventListener(\"keydown\",blockKeyboardRefresh);window.removeEventListener(\"contextmenu\",blockContextMenu);};},[showInitialPopup]);const handleRefreshConfirm=()=>{setShowRefreshWarning(false);window.location.reload();// Perform manual refresh\n};const handleRefreshCancel=()=>{setShowRefreshWarning(false);};return{handleRefreshConfirm,handleRefreshCancel};};export default useRefreshHandler;","map":{"version":3,"names":["useEffect","useRefreshHandler","_ref","showInitialPopup","setShowRefreshWarning","clearDataOnRefresh","sessionStorage","clear","window","addEventListener","removeEventListener","blockRefresh","e","preventDefault","stopPropagation","returnValue","blockKeyboardRefresh","metaKey","key","ctrlKey","blockContextMenu","handleRefreshConfirm","location","reload","handleRefreshCancel"],"sources":["/home/soham/aiims/my-app/src/useRefreshHandler.js"],"sourcesContent":["import { useEffect } from \"react\";\n\nconst useRefreshHandler = ({\n  showInitialPopup,\n  setShowRefreshWarning,\n}) => {\n  useEffect(() => {\n    const clearDataOnRefresh = () => {\n      sessionStorage.clear();\n    };\n\n    window.addEventListener(\"beforeunload\", clearDataOnRefresh);\n\n    return () => {\n      window.removeEventListener(\"beforeunload\", clearDataOnRefresh);\n    };\n  }, []);\n\n  useEffect(() => {\n    const blockRefresh = (e) => {\n      if (!showInitialPopup) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.returnValue = \"\";\n      }\n    };\n\n    const blockKeyboardRefresh = (e) => {\n      if (!showInitialPopup) {\n        if (\n          (e.metaKey && e.key === \"r\") || // Cmd + R (macOS)\n          (e.ctrlKey && e.key === \"r\") || // Ctrl + R (Windows/Linux)\n          e.key === \"F5\" // F5 (all platforms)\n        ) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      }\n    };\n\n    const blockContextMenu = (e) => {\n      if (!showInitialPopup) {\n        e.preventDefault();\n      }\n    };\n\n    window.addEventListener(\"beforeunload\", blockRefresh);\n    window.addEventListener(\"keydown\", blockKeyboardRefresh);\n    window.addEventListener(\"contextmenu\", blockContextMenu);\n\n    return () => {\n      window.removeEventListener(\"beforeunload\", blockRefresh);\n      window.removeEventListener(\"keydown\", blockKeyboardRefresh);\n      window.removeEventListener(\"contextmenu\", blockContextMenu);\n    };\n  }, [showInitialPopup]);\n\n  const handleRefreshConfirm = () => {\n    setShowRefreshWarning(false);\n    window.location.reload(); // Perform manual refresh\n  };\n\n  const handleRefreshCancel = () => {\n    setShowRefreshWarning(false);\n  };\n\n  return { handleRefreshConfirm, handleRefreshCancel };\n};\n\nexport default useRefreshHandler;\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CAEjC,KAAM,CAAAC,iBAAiB,CAAGC,IAAA,EAGpB,IAHqB,CACzBC,gBAAgB,CAChBC,qBACF,CAAC,CAAAF,IAAA,CACCF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAK,kBAAkB,CAAGA,CAAA,GAAM,CAC/BC,cAAc,CAACC,KAAK,CAAC,CAAC,CACxB,CAAC,CAEDC,MAAM,CAACC,gBAAgB,CAAC,cAAc,CAAEJ,kBAAkB,CAAC,CAE3D,MAAO,IAAM,CACXG,MAAM,CAACE,mBAAmB,CAAC,cAAc,CAAEL,kBAAkB,CAAC,CAChE,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAENL,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,YAAY,CAAIC,CAAC,EAAK,CAC1B,GAAI,CAACT,gBAAgB,CAAE,CACrBS,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBD,CAAC,CAACE,eAAe,CAAC,CAAC,CACnBF,CAAC,CAACG,WAAW,CAAG,EAAE,CACpB,CACF,CAAC,CAED,KAAM,CAAAC,oBAAoB,CAAIJ,CAAC,EAAK,CAClC,GAAI,CAACT,gBAAgB,CAAE,CACrB,GACGS,CAAC,CAACK,OAAO,EAAIL,CAAC,CAACM,GAAG,GAAK,GAAG,EAAK;AAC/BN,CAAC,CAACO,OAAO,EAAIP,CAAC,CAACM,GAAG,GAAK,GAAI,EAAI;AAChCN,CAAC,CAACM,GAAG,GAAK,IAAK;AAAA,CACf,CACAN,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBD,CAAC,CAACE,eAAe,CAAC,CAAC,CACrB,CACF,CACF,CAAC,CAED,KAAM,CAAAM,gBAAgB,CAAIR,CAAC,EAAK,CAC9B,GAAI,CAACT,gBAAgB,CAAE,CACrBS,CAAC,CAACC,cAAc,CAAC,CAAC,CACpB,CACF,CAAC,CAEDL,MAAM,CAACC,gBAAgB,CAAC,cAAc,CAAEE,YAAY,CAAC,CACrDH,MAAM,CAACC,gBAAgB,CAAC,SAAS,CAAEO,oBAAoB,CAAC,CACxDR,MAAM,CAACC,gBAAgB,CAAC,aAAa,CAAEW,gBAAgB,CAAC,CAExD,MAAO,IAAM,CACXZ,MAAM,CAACE,mBAAmB,CAAC,cAAc,CAAEC,YAAY,CAAC,CACxDH,MAAM,CAACE,mBAAmB,CAAC,SAAS,CAAEM,oBAAoB,CAAC,CAC3DR,MAAM,CAACE,mBAAmB,CAAC,aAAa,CAAEU,gBAAgB,CAAC,CAC7D,CAAC,CACH,CAAC,CAAE,CAACjB,gBAAgB,CAAC,CAAC,CAEtB,KAAM,CAAAkB,oBAAoB,CAAGA,CAAA,GAAM,CACjCjB,qBAAqB,CAAC,KAAK,CAAC,CAC5BI,MAAM,CAACc,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAE;AAC5B,CAAC,CAED,KAAM,CAAAC,mBAAmB,CAAGA,CAAA,GAAM,CAChCpB,qBAAqB,CAAC,KAAK,CAAC,CAC9B,CAAC,CAED,MAAO,CAAEiB,oBAAoB,CAAEG,mBAAoB,CAAC,CACtD,CAAC,CAED,cAAe,CAAAvB,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}