{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nconst useRefreshHandler = ({\n  showInitialPopup,\n  setShowRefreshWarning\n}) => {\n  _s();\n  useEffect(() => {\n    const clearDataOnRefresh = () => {\n      sessionStorage.clear();\n    };\n    window.addEventListener(\"beforeunload\", clearDataOnRefresh);\n    return () => {\n      window.removeEventListener(\"beforeunload\", clearDataOnRefresh);\n    };\n  }, []);\n  useEffect(() => {\n    const blockRefresh = e => {\n      if (!showInitialPopup) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.returnValue = \"\";\n      }\n    };\n    const blockKeyboardRefresh = e => {\n      if (!showInitialPopup) {\n        if (e.metaKey && e.key === \"r\" ||\n        // Cmd + R (macOS)\n        e.ctrlKey && e.key === \"r\" ||\n        // Ctrl + R (Windows/Linux)\n        e.key === \"F5\" // F5 (all platforms)\n        ) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      }\n    };\n    const blockContextMenu = e => {\n      if (!showInitialPopup) {\n        e.preventDefault();\n      }\n    };\n    window.addEventListener(\"beforeunload\", blockRefresh);\n    window.addEventListener(\"keydown\", blockKeyboardRefresh);\n    window.addEventListener(\"contextmenu\", blockContextMenu);\n    return () => {\n      window.removeEventListener(\"beforeunload\", blockRefresh);\n      window.removeEventListener(\"keydown\", blockKeyboardRefresh);\n      window.removeEventListener(\"contextmenu\", blockContextMenu);\n    };\n  }, [showInitialPopup]);\n  const handleRefreshConfirm = () => {\n    setShowRefreshWarning(false);\n    window.location.reload(); // Perform manual refresh\n  };\n  const handleRefreshCancel = () => {\n    setShowRefreshWarning(false);\n  };\n  return {\n    handleRefreshConfirm,\n    handleRefreshCancel\n  };\n};\n_s(useRefreshHandler, \"3ubReDTFssvu4DHeldAg55cW/CI=\");\nexport default useRefreshHandler;","map":{"version":3,"names":["useEffect","useRefreshHandler","showInitialPopup","setShowRefreshWarning","_s","clearDataOnRefresh","sessionStorage","clear","window","addEventListener","removeEventListener","blockRefresh","e","preventDefault","stopPropagation","returnValue","blockKeyboardRefresh","metaKey","key","ctrlKey","blockContextMenu","handleRefreshConfirm","location","reload","handleRefreshCancel"],"sources":["/home/soham/aiims/my-app/src/useRefreshHandler.js"],"sourcesContent":["import { useEffect } from \"react\";\n\nconst useRefreshHandler = ({\n  showInitialPopup,\n  setShowRefreshWarning,\n}) => {\n  useEffect(() => {\n    const clearDataOnRefresh = () => {\n      sessionStorage.clear();\n    };\n\n    window.addEventListener(\"beforeunload\", clearDataOnRefresh);\n\n    return () => {\n      window.removeEventListener(\"beforeunload\", clearDataOnRefresh);\n    };\n  }, []);\n\n  useEffect(() => {\n    const blockRefresh = (e) => {\n      if (!showInitialPopup) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.returnValue = \"\";\n      }\n    };\n\n    const blockKeyboardRefresh = (e) => {\n      if (!showInitialPopup) {\n        if (\n          (e.metaKey && e.key === \"r\") || // Cmd + R (macOS)\n          (e.ctrlKey && e.key === \"r\") || // Ctrl + R (Windows/Linux)\n          e.key === \"F5\" // F5 (all platforms)\n        ) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      }\n    };\n\n    const blockContextMenu = (e) => {\n      if (!showInitialPopup) {\n        e.preventDefault();\n      }\n    };\n\n    window.addEventListener(\"beforeunload\", blockRefresh);\n    window.addEventListener(\"keydown\", blockKeyboardRefresh);\n    window.addEventListener(\"contextmenu\", blockContextMenu);\n\n    return () => {\n      window.removeEventListener(\"beforeunload\", blockRefresh);\n      window.removeEventListener(\"keydown\", blockKeyboardRefresh);\n      window.removeEventListener(\"contextmenu\", blockContextMenu);\n    };\n  }, [showInitialPopup]);\n\n  const handleRefreshConfirm = () => {\n    setShowRefreshWarning(false);\n    window.location.reload(); // Perform manual refresh\n  };\n\n  const handleRefreshCancel = () => {\n    setShowRefreshWarning(false);\n  };\n\n  return { handleRefreshConfirm, handleRefreshCancel };\n};\n\nexport default useRefreshHandler;\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AAEjC,MAAMC,iBAAiB,GAAGA,CAAC;EACzBC,gBAAgB;EAChBC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJJ,SAAS,CAAC,MAAM;IACd,MAAMK,kBAAkB,GAAGA,CAAA,KAAM;MAC/BC,cAAc,CAACC,KAAK,CAAC,CAAC;IACxB,CAAC;IAEDC,MAAM,CAACC,gBAAgB,CAAC,cAAc,EAAEJ,kBAAkB,CAAC;IAE3D,OAAO,MAAM;MACXG,MAAM,CAACE,mBAAmB,CAAC,cAAc,EAAEL,kBAAkB,CAAC;IAChE,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAENL,SAAS,CAAC,MAAM;IACd,MAAMW,YAAY,GAAIC,CAAC,IAAK;MAC1B,IAAI,CAACV,gBAAgB,EAAE;QACrBU,CAAC,CAACC,cAAc,CAAC,CAAC;QAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;QACnBF,CAAC,CAACG,WAAW,GAAG,EAAE;MACpB;IACF,CAAC;IAED,MAAMC,oBAAoB,GAAIJ,CAAC,IAAK;MAClC,IAAI,CAACV,gBAAgB,EAAE;QACrB,IACGU,CAAC,CAACK,OAAO,IAAIL,CAAC,CAACM,GAAG,KAAK,GAAG;QAAK;QAC/BN,CAAC,CAACO,OAAO,IAAIP,CAAC,CAACM,GAAG,KAAK,GAAI;QAAI;QAChCN,CAAC,CAACM,GAAG,KAAK,IAAI,CAAC;QAAA,EACf;UACAN,CAAC,CAACC,cAAc,CAAC,CAAC;UAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;QACrB;MACF;IACF,CAAC;IAED,MAAMM,gBAAgB,GAAIR,CAAC,IAAK;MAC9B,IAAI,CAACV,gBAAgB,EAAE;QACrBU,CAAC,CAACC,cAAc,CAAC,CAAC;MACpB;IACF,CAAC;IAEDL,MAAM,CAACC,gBAAgB,CAAC,cAAc,EAAEE,YAAY,CAAC;IACrDH,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEO,oBAAoB,CAAC;IACxDR,MAAM,CAACC,gBAAgB,CAAC,aAAa,EAAEW,gBAAgB,CAAC;IAExD,OAAO,MAAM;MACXZ,MAAM,CAACE,mBAAmB,CAAC,cAAc,EAAEC,YAAY,CAAC;MACxDH,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAEM,oBAAoB,CAAC;MAC3DR,MAAM,CAACE,mBAAmB,CAAC,aAAa,EAAEU,gBAAgB,CAAC;IAC7D,CAAC;EACH,CAAC,EAAE,CAAClB,gBAAgB,CAAC,CAAC;EAEtB,MAAMmB,oBAAoB,GAAGA,CAAA,KAAM;IACjClB,qBAAqB,CAAC,KAAK,CAAC;IAC5BK,MAAM,CAACc,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;EAC5B,CAAC;EAED,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;IAChCrB,qBAAqB,CAAC,KAAK,CAAC;EAC9B,CAAC;EAED,OAAO;IAAEkB,oBAAoB;IAAEG;EAAoB,CAAC;AACtD,CAAC;AAACpB,EAAA,CAjEIH,iBAAiB;AAmEvB,eAAeA,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}